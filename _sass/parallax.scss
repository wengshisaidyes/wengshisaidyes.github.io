// We need to push each element down to its final position;
// if it is located 100vh below the element origin it needs
// to be moved slightly farther to account for the perspective!
// (114.3vh for translateZ(2px)). Additional height is added 1:1 once
// the element is scrolled into view.

#parallax-container {
    position: relative;
    left: 0;
    top: 0;
    width: 100vw;
    height: 100vh;
    overflow-y: scroll;
    overflow-x: hidden;
    overscroll-behavior: none;
    perspective: 8px;
    perspective-origin: center;
    //perspective-origin: bottom right;
    scroll-snap-type: y mandatory;
}

.foreground {
    position: absolute;
    width: 100%;
    transform-origin: center 50vh;
    //transform-origin: bottom right; //this might fix the chrome over-scroll problem

    img {
        position: absolute;
    }
}

.depth-1 {
    transform: translateZ(1px) scale(0.875);
    z-index: 99;
}

.depth-2 {
    transform: translateZ(2px) scale(0.75);
}

.depth-3 {
    transform: translateZ(3px) scale(0.625);
}

.depth-4 {
    transform: translateZ(4px) scale(0.5);
}

.foreground-image {
    position: relative;
    border-radius: 0.5em;
    overflow: hidden;
    background-clip: content-box;
}

%foreground-layout {
    padding-left: $outside-padding;
    padding-right: $outside-padding;
}

.left {
    @extend %foreground-layout;
    justify-content: flex-start;
}

.center {
    @extend %foreground-layout;
    justify-content: center;
}

.right {
    @extend %foreground-layout;
    justify-content: flex-end;
}

.buffer {
    margin-top: $nav-height;
}

#buffer-overlay {
    height: $nav-height;
    padding-left: $nav-padding;
    font-size: 2em;
    display: flex;
    align-items: center;
    justify-content: flex-start;

    span:first-of-type {
        visibility: hidden;
        margin-right: 0.5em;
        text-transform: uppercase;
    }

    span:last-of-type {
        margin-bottom: -0.2em;
    }
}

#buffer-202 {

}

#buffer-146 {
    height: 133.3vh; //depth 2
}

#buffer-mapbox {
    height: 2*114.3vh; //depth 1
}

#buffer-125 {
    height: 3*160vh; // depth 3
}

#buffer-109 {
    height: 4*133.3vh;
}

#buffer-22 {
    height: 5*160vh;
}

#buffer-57 {
    height: 6*133.3vh;
}

#img-202 {
    height: 100vh - $nav-height + 5vh;
    width: 100%;

    img {
        bottom: 0;
        left: 50%;
        transform-origin: bottom center;
        transform: translate(-50%, 5%) scale(0.25);
    }
}

#img-146 {
    height: 100vh - $nav-height - $nav-gap;
    width: 30%;

    img {
        bottom: 0;
        left: 50%;
        transform-origin: bottom center;
        transform: translate(-50.5%, 3.4%) scale(0.16);
    }
}

#img-mapbox {
    height: 100vh - $nav-height - $nav-gap;
    width: 100%;
}

#img-125 {
    height: 100vh - $nav-height - $nav-gap;
    width: 60%;

    img {
        bottom: 0;
        left: 50%;
        transform-origin: bottom center;
        transform: translate(-49.5%, 0%) scale(0.16);
    }
}

#img-109 {
    height: 100vh - $nav-height + 5vh;
    width: 100%;

    img {
        bottom: 0;
        left: 50%;
        transform-origin: bottom center;
        transform: translate(-50%, 0%) scale(0.24);
    }
}

#img-22 {
    height: 100vh - $nav-height - $nav-gap;
    width: 30%;

    img {
        bottom: 0;
        left: 50%;
        transform-origin: bottom center;
        transform: translate(-50%, 0%) scale(0.12);
    }
}

#img-57 {
    height: 100vh - $nav-height - 2*$nav-gap;
    width: 100%;
    border-radius: 0.5em 0.5em 0 0;

    img {
        bottom: 0;
        left: 50%;
        transform-origin: bottom center;
        transform: translate(-50%, 3%) scale(0.235);
    }
}
